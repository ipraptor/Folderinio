# Folderinio — Offline File System Viewer (HTML)

Однофайловый офлайн-вьюер, который строит интерактивное дерево файловой системы прямо в браузере. Работает по списку файлов, снятому с Windows командой `dir`. Никаких установок, всё локально.

## Что умеет

- Открытие дампа путей через кнопку «Открыть».
- Восстановление структуры директорий из линейного списка файлов.
- Раскрывающиеся папки. Ленивая отрисовка вложенных уровней.
- Поиск/фильтр по имени с подсветкой совпадений.
- «Развернуть всё» и «Свернуть всё».
- «Скрыть пустые» — возможность скрывать каталоги без файлов внутри.
- Боковая панель «Сводка»: общее число каталогов, файлов, исполняемых файлов.
- Гистограмма расширений (топ по частоте).
- Клик по расширению показывает список конкретных путей этого типа, с возможностью подсветить узел в дереве.
- Полная офлайн-работа: файл никуда не отправляется.

## Формат входных данных

Поддерживается плоский список файлов, полученный стандартной командой Windows в формате "полный путь к файлу на одной строке".

Пример команды выгрузки:

```cmd
dir C:\ /s /b /a-d 2>NUL > C:\filelist.txt
```

Что это делает:
- `C:\` — корень, с которого собираем.
- `/s` — рекурсивно по всем подпапкам.
- `/b` — bare-формат (только путь без служебного мусора).
- `/a-d` — выводить только файлы, не каталоги.
- `2>NUL` — убрать ошибки доступа.
- `> C:\filelist.txt` — сохранить результат в файл.

Результат — текстовый файл вида:

```text
C:\Windows\explorer.exe
C:\Windows\System32\cmd.exe
C:\Users\user\Desktop\notes.txt
...
```

Каждая строка — абсолютный путь к файлу. Папки не перечисляются. Вьюер сам восстановит структуру директорий, посчитает статистику и покажет дерево.

Поддерживаются несколько дисков. Если в файле есть строки с разными буквами дисков (например `C:\...` и `D:\...`), в интерфейсе корнем будет `ROOT`, внутри будут `C:` и `D:` как отдельные ветки.

Поддерживаются пути вида `\\SERVER\Share\folder\file.exe` (UNC).

Код автоматически пытается распознать кодировку входного файла: UTF-8, Windows-1251, OEM866.

## Как использовать

1. Сохраните файл `folderinio.html` из репозитория.
2. На целевой машине выполните команду выше и получите `filelist.txt`.
3. Откройте `folderinio.html` в любом современном браузере.
4. Нажмите кнопку «Открыть» и выберите `filelist.txt`.
5. После загрузки:
   - кликайте по папкам для раскрытия,
   - используйте поле «Фильтр по имени…» и кнопку «Применить» для подсветки совпадающих узлов и автораскрытия веток,
   - используйте «Развернуть» / «Свернуть» для массового управления деревом,
   - используйте «Скрыть пустые», чтобы убрать каталоги без файлов,
   - кнопка «Сводка ⇄» сворачивает/разворачивает правую панель с метриками.

## Панель «Сводка»

Панель справа даёт быстрый осмотр поверхности атаки и шума:
- «Директории» — общее число узлов-каталогов, восстановленных из путей.
- «Файлы» — общее число файлов.
- «Исполняемые» — сколько файлов с "подозримо исполняемыми" расширениями.
- «Уник. расширений» — сколько разных расширений встретилось.

Список расширений разбит на две зоны:
- «Исполняемые по расширению» — отдельная группа для `exe`, `ps1`, `cmd`, `bat`, `py`, `js`. Клик по плашке открывает список всех таких путей и позволяет прыгнуть к ним в дереве.
- «Топ расширений» — частотная выдача любых расширений вообще, по убыванию встречаемости.

## Совместимость

- Источник данных: Windows `dir`, любое поколение Windows Server / Windows Desktop, включая старые системы без PowerShell.
- Браузеры просмотра: Chrome, Edge, Firefox, Safari, без расширений.
- Кросс-кодировка: UTF-8, Windows-1251, OEM866. Это покрывает типичные дампы с русскими путями.

## Конфиденциальность

Обработка выполняется полностью в памяти браузера. Данные с диска не отправляются в сеть. Нет загрузок наружу, нет бекенда.

Это можно использовать на изолированной машине без доступа в интернет.

## Ограничения

- Очень большие дампы (сотни тысяч строк, десятки мегабайт) визуально прогружаются, но скролл и массовое «Развернуть всё» будут тяжёлыми.
- Вход должен быть в формате `/b` и с абсолютными путями. Любые модифицированные форматы не поддерживаются.
- Каталоги, которые не содержат файлов (например системные точки монтирования или пустые ветки), помечаются как «пустые» и могут быть скрыты кнопкой «Скрыть пустые».

## Быстрый старт

Шаг 1. На целевой машине собрать структуру диска C:

```cmd
dir C:\ /s /b /a-d 2>NUL > C:\filelist.txt
```

При необходимости повторить и для других дисков:

```cmd
dir D:\ /s /b /a-d 2>NUL >> C:\filelist.txt
```

(Обратите внимание на `>>`, это добавит результаты со второго диска в тот же файл.)

Шаг 2. Перенести `filelist.txt` на рабочую машину.

Шаг 3. Открыть локально `folderinio.html` и выбрать этот файл через интерфейс.

## Импорт в проект

Файл самостоятельный. Никаких зависимостей, никакого backend. Можно:
- положить `folderinio.html` в репозиторий,
- переименовать как угодно,
- использовать офлайн на флэшке.
